---
# yaml-language-server: $schema=https://raw.githubusercontent.com/smykla-labs/.github/main/schemas/sync-config.schema.json
# Unified Sync Configuration

sync:
  # Enable label removal to keep labels in sync with central config
  labels:
    allow_removal: true

  files:
    merge:
      - path: "renovate.json"
        strategy: "deep-merge"
        arrayStrategies:
          "$.customManagers": "append"
          "$.packageRules": "append"
        overrides:
          customManagers:
            - customType: "regex"
              description: "Update Temurin Java in mise config"
              fileMatch: ["^\\.mise\\.toml$"]
              matchStrings: ["java\\s*=\\s*\"temurin-(?<currentValue>[^\"]+)\""]
              autoReplaceStringTemplate: "java = \"temurin-{{{newValue}}}\""
              depNameTemplate: "java"
              datasourceTemplate: "java-version"
              versioningTemplate: "loose"
          packageRules:
            - description: "Disable mise manager for Java (handled by customManager for temurin)"
              enabled: false
              matchManagers: ["mise"]
              matchPackageNames: ["java"]
